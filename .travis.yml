sudo: false
dist: trusty
language: python
python:
  - "3.5"
  - "3.6"
  - "pypy3.5"

before_install:
  - nvm install 8.9
  - nvm use 8.9
  - if [[ $TRAVIS_PYTHON_VERSION == '3.7' ]]; then sudo add-apt-repository ppa:deadsnakes/ppa -y; fi
  - if [[ $TRAVIS_PYTHON_VERSION == '3.7' ]]; then sudo sudo apt-get update; fi

install:
  - pip install tox-travis
  - pip install codecov
  - cd tests/acceptance_tests/javascript/ && npm install

script: tox

matrix:
  include:
  - python: "3.7"
    dist: xenial
    sudo: true
  - python: "3.8"
    dist: xenial
    sudo: true
  - python: "3.6"
    env: TOXENV="flake8"
  - python: "3.6"
    env: TOXENV="black"

after_success: codecov
